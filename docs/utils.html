---

title: Block utilities


keywords: fastai
sidebar: home_sidebar

summary: "Block utilities"
description: "Block utilities"
nb_path: "nbs/core/utils.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/core/utils.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span> 
<span class="kn">from</span> <span class="nn">block_types.core.block_types</span> <span class="kn">import</span> <span class="n">Component</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Functions-for-loading-and-saving">Functions for loading and saving<a class="anchor-link" href="#Functions-for-loading-and-saving"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="save_csv" class="doc_header"><code>save_csv</code><a href="https://github.com/Jaume-JCI/block-types/tree/main/block_types/core/utils.py#L35" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>save_csv</code>(<strong><code>df</code></strong>, <strong><code>path</code></strong>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

<pre><code>Save DataFrame `df` to csv file indicated in `path`.

Convenience function that uses the same signature
as joblib.dump, which is needed by `DataIO`.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="save_parquet" class="doc_header"><code>save_parquet</code><a href="https://github.com/Jaume-JCI/block-types/tree/main/block_types/core/utils.py#L45" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>save_parquet</code>(<strong><code>df</code></strong>, <strong><code>path</code></strong>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

<pre><code>Save DataFrame `df` to parquet file indicated in `path`.

Convenience function that uses the same signature
as joblib.dump, which is needed by `DataIO`.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="save_multi_index_parquet" class="doc_header"><code>save_multi_index_parquet</code><a href="https://github.com/Jaume-JCI/block-types/tree/main/block_types/core/utils.py#L55" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>save_multi_index_parquet</code>(<strong><code>df</code></strong>, <strong><code>path</code></strong>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

<pre><code>Save DataFrame `df` to multi-index parquet file indicated in `path`.

Convenience function that uses the same signature
as joblib.dump, which is needed by `DataIO`.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="save_keras_model" class="doc_header"><code>save_keras_model</code><a href="https://github.com/Jaume-JCI/block-types/tree/main/block_types/core/utils.py#L66" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>save_keras_model</code>(<strong><code>model</code></strong>, <strong><code>path</code></strong>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

<pre><code>Save keras `model` to file indicated in `path`.

Convenience function that uses the same signature
as joblib.dump, which is needed by `DataIO`.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="save_csv_gz" class="doc_header"><code>save_csv_gz</code><a href="https://github.com/Jaume-JCI/block-types/tree/main/block_types/core/utils.py#L76" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>save_csv_gz</code>(<strong><code>df</code></strong>, <strong><code>path</code></strong>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

<pre><code>Save DataFrame `df` to csv.gz file indicated in `path`.

Convenience function that uses the same signature
as joblib.dump, which is needed by `DataIO`.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="read_csv" class="doc_header"><code>read_csv</code><a href="https://github.com/Jaume-JCI/block-types/tree/main/block_types/core/utils.py#L86" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>read_csv</code>(<strong><code>path</code></strong>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

<pre><code>Read DataFrame from csv file indicated in `path`.

Convenience function that uses the same signature
as joblib.load, which is needed by `DataIO`.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="read_csv_gz" class="doc_header"><code>read_csv_gz</code><a href="https://github.com/Jaume-JCI/block-types/tree/main/block_types/core/utils.py#L96" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>read_csv_gz</code>(<strong><code>path</code></strong>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

<pre><code>Read DataFrame from csv.gz file indicated in `path`.

Convenience function that uses the same signature
as joblib.load, which is needed by `DataIO`.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="load_keras_model" class="doc_header"><code>load_keras_model</code><a href="https://github.com/Jaume-JCI/block-types/tree/main/block_types/core/utils.py#L106" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>load_keras_model</code>(<strong><code>path</code></strong>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Mapping-type-to-loading-/-saving-function">Mapping type to loading / saving function<a class="anchor-link" href="#Mapping-type-to-loading-/-saving-function"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="DataIO-class">DataIO class<a class="anchor-link" href="#DataIO-class"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="DataIO" class="doc_header"><code>class</code> <code>DataIO</code><a href="https://github.com/Jaume-JCI/block-types/tree/main/block_types/core/utils.py#L135" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>DataIO</code>(<strong><code>component</code></strong>=<em><code>None</code></em>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Subclasses-of-DataIO">Subclasses of DataIO<a class="anchor-link" href="#Subclasses-of-DataIO"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="PandasIO">PandasIO<a class="anchor-link" href="#PandasIO"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="PandasIO" class="doc_header"><code>class</code> <code>PandasIO</code><a href="https://github.com/Jaume-JCI/block-types/tree/main/block_types/core/utils.py#L461" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>PandasIO</code>(<strong><code>result_file_extension</code></strong>=<em><code>'.parquet'</code></em>, <strong><code>result_load_func</code></strong>=<em><code>read_parquet</code></em>, <strong><code>result_save_func</code></strong>=<em><code>save_multi_index_parquet</code></em>, <strong>**<code>kwargs</code></strong>) :: <a href="/utils.html#DataIO"><code>DataIO</code></a></p>
</blockquote>

<pre><code>Saves results in parquet format by default.

Results are supposed to be in Pandas DataFrame format.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="PickleIO">PickleIO<a class="anchor-link" href="#PickleIO"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="PickleIO" class="doc_header"><code>class</code> <code>PickleIO</code><a href="https://github.com/Jaume-JCI/block-types/tree/main/block_types/core/utils.py#L479" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>PickleIO</code>(<strong><code>fitting_file_extension</code></strong>=<em><code>'.pk'</code></em>, <strong><code>fitting_load_func</code></strong>=<em><code>load</code></em>, <strong><code>fitting_save_func</code></strong>=<em><code>dump</code></em>, <strong><code>result_file_extension</code></strong>=<em><code>'.pk'</code></em>, <strong><code>result_load_func</code></strong>=<em><code>load</code></em>, <strong><code>result_save_func</code></strong>=<em><code>dump</code></em>, <strong>**<code>kwargs</code></strong>) :: <a href="/utils.html#DataIO"><code>DataIO</code></a></p>
</blockquote>

<pre><code>DataIO that uses pickle format for saving / loading the estimator.

It does not restrict the format for saving / loading the result of
the transformation.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="NoSaverIO">NoSaverIO<a class="anchor-link" href="#NoSaverIO"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="NoSaverIO" class="doc_header"><code>class</code> <code>NoSaverIO</code><a href="https://github.com/Jaume-JCI/block-types/tree/main/block_types/core/utils.py#L509" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>NoSaverIO</code>(<strong><code>load</code></strong>=<em><code>False</code></em>, <strong><code>save</code></strong>=<em><code>False</code></em>, <strong><code>force_load</code></strong>=<em><code>False</code></em>, <strong><code>force_save</code></strong>=<em><code>False</code></em>, <strong>**<code>kwargs</code></strong>) :: <a href="/utils.html#DataIO"><code>DataIO</code></a></p>
</blockquote>

<pre><code>DataIO that does not load or save anything.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Factory">Factory<a class="anchor-link" href="#Factory"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="data_io_factory" class="doc_header"><code>data_io_factory</code><a href="https://github.com/Jaume-JCI/block-types/tree/main/block_types/core/utils.py#L522" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>data_io_factory</code>(<strong><code>data_io</code></strong>, <strong><code>component</code></strong>=<em><code>None</code></em>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Example-/-test">Example / test<a class="anchor-link" href="#Example-/-test"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_data_io_factory" class="doc_header"><code>test_data_io_factory</code><a href="https://github.com/Jaume-JCI/block-types/tree/main/block_types/tests/core/test_utils.py#L26" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>test_data_io_factory</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#@pytest.mark.reference_fails</span>
<span class="k">def</span> <span class="nf">test_data_io_factory</span> <span class="p">():</span>
    <span class="n">data_io</span> <span class="o">=</span> <span class="n">data_io_factory</span> <span class="p">(</span><span class="s1">&#39;NoSaverIO&#39;</span><span class="p">,</span> <span class="n">force_save</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="n">data_io</span><span class="p">)</span> <span class="ow">is</span> <span class="n">NoSaverIO</span>
    <span class="k">assert</span> <span class="n">data_io</span><span class="o">.</span><span class="n">save_flag</span> <span class="ow">is</span> <span class="kc">False</span>

    <span class="n">data_io</span> <span class="o">=</span> <span class="n">data_io_factory</span> <span class="p">(</span><span class="s1">&#39;NoSaverIO&#39;</span><span class="p">,</span> <span class="n">force_save</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="n">data_io</span><span class="p">)</span> <span class="ow">is</span> <span class="n">NoSaverIO</span>
    <span class="k">assert</span> <span class="n">data_io</span><span class="o">.</span><span class="n">save_flag</span> <span class="ow">is</span> <span class="kc">True</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tst</span><span class="o">.</span><span class="n">run</span> <span class="p">(</span><span class="n">test_data_io_factory</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>running test_data_io_factory
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="ModelPlotter">ModelPlotter<a class="anchor-link" href="#ModelPlotter"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ModelPlotter" class="doc_header"><code>class</code> <code>ModelPlotter</code><a href="https://github.com/Jaume-JCI/block-types/tree/main/block_types/core/utils.py#L538" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ModelPlotter</code>(<strong><code>component</code></strong>=<em><code>None</code></em>, <strong><code>diagram_node_name</code></strong>=<em><code>None</code></em>, <strong><code>diagram_edge_name</code></strong>=<em><code>''</code></em>, <strong><code>diagram_module_path</code></strong>=<em><code>''</code></em>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

<pre><code>Helper class that provides information about the component used for plotting the pipeline diagram.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Profiler">Profiler<a class="anchor-link" href="#Profiler"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Profiler" class="doc_header"><code>class</code> <code>Profiler</code><a href="https://github.com/Jaume-JCI/block-types/tree/main/block_types/core/utils.py#L582" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Profiler</code>(<strong><code>component</code></strong>, <strong><code>do_profiling</code></strong>=<em><code>True</code></em>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Example-/-test">Example / test<a class="anchor-link" href="#Example-/-test"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_profiler" class="doc_header"><code>test_profiler</code><a href="https://github.com/Jaume-JCI/block-types/tree/main/block_types/tests/core/test_utils.py#L37" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>test_profiler</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#@pytest.mark.reference_fails</span>
<span class="k">def</span> <span class="nf">test_profiler</span> <span class="p">():</span>
    <span class="k">class</span> <span class="nc">A</span><span class="p">():</span>
        <span class="k">def</span> <span class="fm">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;comp_a&#39;</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">hierarchy_level</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">time</span> <span class="o">=</span> <span class="n">time</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hierarchy_level</span> <span class="o">=</span> <span class="n">hierarchy_level</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">profiler</span> <span class="o">=</span> <span class="n">Profiler</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">apply</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">split</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;apply&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">profiler</span><span class="o">.</span><span class="n">start_timer</span> <span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">profiler</span><span class="o">.</span><span class="n">start_no_overhead_timer</span> <span class="p">()</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">profiler</span><span class="o">.</span><span class="n">finish_no_overhead_timer</span> <span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">split</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time</span><span class="o">/</span><span class="mi">10</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">profiler</span><span class="o">.</span><span class="n">finish_timer</span> <span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">split</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">fit</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">split</span><span class="o">=</span><span class="s1">&#39;training&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;fit&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">profiler</span><span class="o">.</span><span class="n">start_timer</span> <span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">profiler</span><span class="o">.</span><span class="n">start_no_overhead_timer</span> <span class="p">()</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">profiler</span><span class="o">.</span><span class="n">finish_no_overhead_timer</span> <span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">split</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time</span><span class="o">/</span><span class="mi">10</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">profiler</span><span class="o">.</span><span class="n">finish_timer</span> <span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">split</span><span class="p">)</span>

    <span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;comp_a&#39;</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="mf">0.25</span><span class="p">)</span>
    <span class="n">a</span><span class="o">.</span><span class="n">fit</span> <span class="p">()</span>
    <span class="n">a</span><span class="o">.</span><span class="n">apply</span> <span class="p">()</span>
    <span class="n">display</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">profiler</span><span class="o">.</span><span class="n">times</span><span class="p">[</span><span class="s1">&#39;sum&#39;</span><span class="p">])</span>

    <span class="c1">#assert np.floor(a.profiler.times.sum.loc[&#39;fit&#39;,&#39;training&#39;]*10)==5 and np.floor(a.profiler.times.sum.loc[&#39;apply&#39;,&#39;test&#39;]*100)==28</span>
    <span class="k">assert</span> <span class="n">a</span><span class="o">.</span><span class="n">profiler</span><span class="o">.</span><span class="n">times</span><span class="o">.</span><span class="n">number</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;fit&#39;</span><span class="p">,</span><span class="s1">&#39;training&#39;</span><span class="p">]</span><span class="o">==</span><span class="mf">1.0</span> <span class="ow">and</span> <span class="n">a</span><span class="o">.</span><span class="n">profiler</span><span class="o">.</span><span class="n">times</span><span class="o">.</span><span class="n">number</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;apply&#39;</span><span class="p">,</span><span class="s1">&#39;test&#39;</span><span class="p">]</span><span class="o">==</span><span class="mf">1.0</span>

    <span class="n">a</span><span class="o">.</span><span class="n">apply</span> <span class="p">()</span>

    <span class="c1">#assert np.floor(a.profiler.times.sum.loc[&#39;fit&#39;,&#39;training&#39;]*10)==5 and np.floor(a.profiler.times.sum.loc[&#39;apply&#39;,&#39;test&#39;]*100)==55</span>
    <span class="k">assert</span> <span class="n">a</span><span class="o">.</span><span class="n">profiler</span><span class="o">.</span><span class="n">times</span><span class="o">.</span><span class="n">number</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;fit&#39;</span><span class="p">,</span><span class="s1">&#39;training&#39;</span><span class="p">]</span><span class="o">==</span><span class="mf">1.0</span> <span class="ow">and</span> <span class="n">a</span><span class="o">.</span><span class="n">profiler</span><span class="o">.</span><span class="n">times</span><span class="o">.</span><span class="n">number</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;apply&#39;</span><span class="p">,</span><span class="s1">&#39;test&#39;</span><span class="p">]</span><span class="o">==</span><span class="mf">2.0</span>
    <span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">profiler</span><span class="o">.</span><span class="n">times</span><span class="o">.</span><span class="n">number</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;fit&#39;</span><span class="p">,</span><span class="s1">&#39;test&#39;</span><span class="p">])</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">profiler</span><span class="o">.</span><span class="n">times</span><span class="o">.</span><span class="n">number</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;apply&#39;</span><span class="p">,</span><span class="s1">&#39;training&#39;</span><span class="p">])</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">profiler</span><span class="o">.</span><span class="n">retrieve_times</span><span class="p">(</span><span class="n">is_leaf</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1">#assert float(np.floor(df.avg.loc[:,(&#39;test&#39;,&#39;apply&#39;)]*100))==27</span>

    <span class="c1">#assert float(np.floor(df.sum.loc[:,(&#39;test&#39;,&#39;apply&#39;)]*100))==55</span>

    <span class="k">assert</span> <span class="p">((</span><span class="n">df</span><span class="o">.</span><span class="n">max</span> <span class="o">&gt;=</span> <span class="n">df</span><span class="o">.</span><span class="n">min</span><span class="p">)</span> <span class="o">|</span> <span class="n">df</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">isna</span><span class="p">())</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>

    <span class="k">assert</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,(</span><span class="s1">&#39;test&#39;</span><span class="p">,</span><span class="s1">&#39;apply&#39;</span><span class="p">)]</span> <span class="o">&gt;</span> <span class="n">df</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,(</span><span class="s1">&#39;test&#39;</span><span class="p">,</span><span class="s1">&#39;apply&#39;</span><span class="p">)])</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>

    <span class="n">b</span> <span class="o">=</span> <span class="n">A</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;comp_b&#39;</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="mf">0.30</span><span class="p">)</span>
    <span class="n">b</span><span class="o">.</span><span class="n">apply</span> <span class="p">(</span><span class="n">split</span><span class="o">=</span><span class="s1">&#39;validation&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;fit_apply&#39;</span><span class="p">)</span>
    <span class="n">b</span><span class="o">.</span><span class="n">fit</span> <span class="p">()</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">profiler</span><span class="o">.</span><span class="n">retrieve_times</span><span class="p">(</span><span class="n">is_leaf</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">df2</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">profiler</span><span class="o">.</span><span class="n">retrieve_times</span><span class="p">(</span><span class="n">is_leaf</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">dfd</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">profiler</span><span class="o">.</span><span class="n">combine_times</span> <span class="p">([</span><span class="n">df</span><span class="p">,</span> <span class="n">df2</span><span class="p">])</span>
    <span class="n">display</span><span class="p">(</span><span class="n">dfd</span><span class="o">.</span><span class="n">avg</span><span class="p">)</span>

    <span class="k">assert</span> <span class="n">dfd</span><span class="o">.</span><span class="n">avg</span><span class="o">.</span><span class="n">shape</span><span class="o">==</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span>
    <span class="k">assert</span> <span class="p">(</span><span class="n">dfd</span><span class="o">.</span><span class="n">avg</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">==</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="k">assert</span> <span class="p">(</span><span class="n">dfd</span><span class="o">.</span><span class="n">avg</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">==</span><span class="p">[</span><span class="s1">&#39;comp_a&#39;</span><span class="p">,</span> <span class="s1">&#39;comp_b&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tst</span><span class="o">.</span><span class="n">run</span> <span class="p">(</span><span class="n">test_profiler</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>running test_profiler
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>training</th>
      <th>test</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>fit</th>
      <td>0.533034</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>apply</th>
      <td>NaN</td>
      <td>0.281235</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th>leaf</th>
      <th colspan="2" halign="left">test</th>
      <th colspan="3" halign="left">training</th>
      <th colspan="2" halign="left">validation</th>
    </tr>
    <tr>
      <th></th>
      <th></th>
      <th></th>
      <th>apply</th>
      <th>fit</th>
      <th>apply</th>
      <th>fit</th>
      <th>fit_apply</th>
      <th>fit</th>
      <th>fit_apply</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="2" valign="top">0</th>
      <th>comp_a</th>
      <td>True</td>
      <td>0.279284</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.533034</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>comp_b</th>
      <td>True</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.636009</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.335077</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Comparator">Comparator<a class="anchor-link" href="#Comparator"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Comparator" class="doc_header"><code>class</code> <code>Comparator</code><a href="https://github.com/Jaume-JCI/block-types/tree/main/block_types/core/utils.py#L664" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Comparator</code>(<strong><code>component</code></strong>=<em><code>None</code></em>, <strong><code>data_io</code></strong>=<em><code>None</code></em>, <strong><code>name</code></strong>=<em><code>'comparator'</code></em>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Example-/-test">Example / test<a class="anchor-link" href="#Example-/-test"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="MyTransformComparator" class="doc_header"><code>class</code> <code>MyTransformComparator</code><a href="https://github.com/Jaume-JCI/block-types/tree/main/block_types/tests/core/test_utils.py#L98" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>MyTransformComparator</code>(<strong><code>noise</code></strong>=<em><code>1e-10</code></em>, <strong><code>different</code></strong>=<em><code>False</code></em>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_comparator" class="doc_header"><code>test_comparator</code><a href="https://github.com/Jaume-JCI/block-types/tree/main/block_types/tests/core/test_utils.py#L122" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>test_comparator</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#@pytest.mark.reference_fails</span>
<span class="k">class</span> <span class="nc">MyTransformComparator</span> <span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">noise</span><span class="o">=</span><span class="mf">1e-10</span><span class="p">,</span> <span class="n">different</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">noise</span> <span class="o">=</span> <span class="n">noise</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">different</span> <span class="o">=</span> <span class="n">different</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;mine&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_io</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_generate_noise</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">noise</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">()</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">noise</span>
            <span class="k">if</span> <span class="n">noise</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">noise</span><span class="o">/</span><span class="mi">10</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="k">return</span> <span class="n">noise</span>

    <span class="k">def</span> <span class="fm">__call__</span> <span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="p">([[</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">2.0</span><span class="p">],[</span><span class="mf">3.0</span><span class="p">,</span><span class="mf">4.0</span><span class="p">]],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_noise</span> <span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">different</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">+</span><span class="mi">10</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">10.0</span><span class="p">,</span><span class="mf">20.0</span><span class="p">],[</span><span class="mf">30.0</span><span class="p">,</span><span class="mf">40.0</span><span class="p">]])</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_noise</span> <span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">sequence</span><span class="o">=</span><span class="p">[[</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">2.0</span><span class="p">],</span> <span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nb">dict</span><span class="p">(</span><span class="n">vector</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">)],</span>
                      <span class="n">array</span><span class="o">=</span><span class="n">x</span><span class="o">+</span><span class="mi">10</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
        
<span class="k">def</span> <span class="nf">test_comparator</span> <span class="p">():</span>
    <span class="n">tr</span> <span class="o">=</span> <span class="n">MyTransformComparator</span> <span class="p">()</span>
    <span class="n">tr2</span><span class="o">=</span> <span class="n">MyTransformComparator</span> <span class="p">()</span>
    <span class="n">comp</span> <span class="o">=</span> <span class="n">Comparator</span> <span class="p">(</span><span class="n">tr</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">comp</span><span class="o">.</span><span class="n">compare</span> <span class="p">(</span><span class="n">tr</span><span class="p">(),</span> <span class="n">tr2</span><span class="p">())</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span>

    <span class="n">tr2</span><span class="o">=</span> <span class="n">MyTransformComparator</span> <span class="p">(</span><span class="n">different</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">comp</span><span class="o">.</span><span class="n">compare</span> <span class="p">(</span><span class="n">tr</span><span class="p">(),</span> <span class="n">tr2</span><span class="p">())</span>
    <span class="nb">print</span> <span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span>

    <span class="n">tr2</span><span class="o">=</span> <span class="n">MyTransformComparator</span> <span class="p">(</span><span class="n">noise</span><span class="o">=</span><span class="mf">1e-10</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">comp</span><span class="o">.</span><span class="n">compare</span> <span class="p">(</span><span class="n">tr</span><span class="p">(),</span> <span class="n">tr2</span><span class="p">())</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span>

    <span class="n">tr2</span><span class="o">=</span> <span class="n">MyTransformComparator</span> <span class="p">(</span><span class="n">noise</span><span class="o">=</span><span class="mf">1e-1</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">comp</span><span class="o">.</span><span class="n">compare</span> <span class="p">(</span><span class="n">tr</span><span class="p">(),</span> <span class="n">tr2</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tst</span><span class="o">.</span><span class="n">run</span> <span class="p">(</span><span class="n">test_comparator</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>&gt; <span class="ansi-green-fg">/tmp/ipykernel_47082/516144916.py</span>(28)<span class="ansi-cyan-fg">test_comparator</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">     26 </span>
<span class="ansi-green-fg">     27 </span><span class="ansi-green-fg">def</span> test_comparator <span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">---&gt; 28 </span><span class="ansi-red-fg">    </span>tr <span class="ansi-blue-fg">=</span> MyTransformComparator <span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">     29 </span><span class="ansi-red-fg">    </span>tr2<span class="ansi-blue-fg">=</span> MyTransformComparator <span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">     30 </span><span class="ansi-red-fg">    </span>comp <span class="ansi-blue-fg">=</span> Comparator <span class="ansi-blue-fg">(</span>tr<span class="ansi-blue-fg">)</span>

</pre>
</div>
</div>

<div class="output_area">


</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>&gt; <span class="ansi-green-fg">/tmp/ipykernel_47082/516144916.py</span>(29)<span class="ansi-cyan-fg">test_comparator</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">     27 </span><span class="ansi-green-fg">def</span> test_comparator <span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">     28 </span><span class="ansi-red-fg">    </span>tr <span class="ansi-blue-fg">=</span> MyTransformComparator <span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">---&gt; 29 </span><span class="ansi-red-fg">    </span>tr2<span class="ansi-blue-fg">=</span> MyTransformComparator <span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">     30 </span><span class="ansi-red-fg">    </span>comp <span class="ansi-blue-fg">=</span> Comparator <span class="ansi-blue-fg">(</span>tr<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">     31 </span><span class="ansi-red-fg">    </span>result <span class="ansi-blue-fg">=</span> comp<span class="ansi-blue-fg">.</span>compare <span class="ansi-blue-fg">(</span>tr<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">,</span> tr2<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>

</pre>
</div>
</div>

<div class="output_area">


</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>&gt; <span class="ansi-green-fg">/tmp/ipykernel_47082/516144916.py</span>(30)<span class="ansi-cyan-fg">test_comparator</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">     28 </span><span class="ansi-red-fg">    </span>tr <span class="ansi-blue-fg">=</span> MyTransformComparator <span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">     29 </span><span class="ansi-red-fg">    </span>tr2<span class="ansi-blue-fg">=</span> MyTransformComparator <span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">---&gt; 30 </span><span class="ansi-red-fg">    </span>comp <span class="ansi-blue-fg">=</span> Comparator <span class="ansi-blue-fg">(</span>tr<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">     31 </span><span class="ansi-red-fg">    </span>result <span class="ansi-blue-fg">=</span> comp<span class="ansi-blue-fg">.</span>compare <span class="ansi-blue-fg">(</span>tr<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">,</span> tr2<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">     32 </span><span class="ansi-red-fg">    </span><span class="ansi-green-fg">assert</span> len<span class="ansi-blue-fg">(</span>result<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">==</span><span class="ansi-cyan-fg">0</span>

</pre>
</div>
</div>

<div class="output_area">


</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>&gt; <span class="ansi-green-fg">/tmp/ipykernel_47082/516144916.py</span>(31)<span class="ansi-cyan-fg">test_comparator</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">     29 </span><span class="ansi-red-fg">    </span>tr2<span class="ansi-blue-fg">=</span> MyTransformComparator <span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">     30 </span><span class="ansi-red-fg">    </span>comp <span class="ansi-blue-fg">=</span> Comparator <span class="ansi-blue-fg">(</span>tr<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">---&gt; 31 </span><span class="ansi-red-fg">    </span>result <span class="ansi-blue-fg">=</span> comp<span class="ansi-blue-fg">.</span>compare <span class="ansi-blue-fg">(</span>tr<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">,</span> tr2<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">     32 </span><span class="ansi-red-fg">    </span><span class="ansi-green-fg">assert</span> len<span class="ansi-blue-fg">(</span>result<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">==</span><span class="ansi-cyan-fg">0</span>
<span class="ansi-green-fg">     33 </span>

</pre>
</div>
</div>

<div class="output_area">


</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>--Call--
&gt; <span class="ansi-green-fg">/tmp/ipykernel_47082/516144916.py</span>(18)<span class="ansi-cyan-fg">__call__</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">     16 </span><span class="ansi-red-fg">        </span><span class="ansi-green-fg">return</span> noise
<span class="ansi-green-fg">     17 </span>
<span class="ansi-green-fg">---&gt; 18 </span><span class="ansi-red-fg">    </span><span class="ansi-green-fg">def</span> __call__ <span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">     19 </span><span class="ansi-red-fg">        </span>df <span class="ansi-blue-fg">=</span> pd<span class="ansi-blue-fg">.</span>DataFrame <span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">[</span><span class="ansi-cyan-fg">1.0</span><span class="ansi-blue-fg">,</span><span class="ansi-cyan-fg">2.0</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">,</span><span class="ansi-blue-fg">[</span><span class="ansi-cyan-fg">3.0</span><span class="ansi-blue-fg">,</span><span class="ansi-cyan-fg">4.0</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">,</span> columns<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;a&#39;</span><span class="ansi-blue-fg">,</span><span class="ansi-blue-fg">&#39;b&#39;</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">)</span> <span class="ansi-blue-fg">+</span> self<span class="ansi-blue-fg">.</span>_generate_noise <span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">     20 </span><span class="ansi-red-fg">        </span><span class="ansi-green-fg">if</span> self<span class="ansi-blue-fg">.</span>different<span class="ansi-blue-fg">:</span>

</pre>
</div>
</div>

<div class="output_area">


</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>--Return--
{&#39;array&#39;: array([[20., ...  [40., 50.]]), &#39;sequence&#39;: [[1.0, 2.0], array([[11., ...  [31., 41.]]), {&#39;data&#39;:      a    b
0....0
1  3.0  4.0, &#39;vector&#39;: array([[10., ...  [30., 40.]])}]}
&gt; <span class="ansi-green-fg">/tmp/ipykernel_47082/516144916.py</span>(25)<span class="ansi-cyan-fg">__call__</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">     23 </span><span class="ansi-red-fg">        result = dict(sequence=[[1.0,2.0], x+1, dict(vector=x, data=df)],
</span><span class="ansi-green-fg">     24 </span><span class="ansi-red-fg">                      array=x+10)
</span><span class="ansi-green-fg">---&gt; 25 </span><span class="ansi-red-fg">        </span><span class="ansi-green-fg">return</span> result
<span class="ansi-green-fg">     26 </span>
<span class="ansi-green-fg">     27 </span><span class="ansi-green-fg">def</span> test_comparator <span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>

</pre>
</div>
</div>

<div class="output_area">


</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>--Call--
&gt; <span class="ansi-green-fg">/tmp/ipykernel_47082/516144916.py</span>(18)<span class="ansi-cyan-fg">__call__</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">     16 </span><span class="ansi-red-fg">        </span><span class="ansi-green-fg">return</span> noise
<span class="ansi-green-fg">     17 </span>
<span class="ansi-green-fg">---&gt; 18 </span><span class="ansi-red-fg">    </span><span class="ansi-green-fg">def</span> __call__ <span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">     19 </span><span class="ansi-red-fg">        </span>df <span class="ansi-blue-fg">=</span> pd<span class="ansi-blue-fg">.</span>DataFrame <span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">[</span><span class="ansi-cyan-fg">1.0</span><span class="ansi-blue-fg">,</span><span class="ansi-cyan-fg">2.0</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">,</span><span class="ansi-blue-fg">[</span><span class="ansi-cyan-fg">3.0</span><span class="ansi-blue-fg">,</span><span class="ansi-cyan-fg">4.0</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">,</span> columns<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;a&#39;</span><span class="ansi-blue-fg">,</span><span class="ansi-blue-fg">&#39;b&#39;</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">)</span> <span class="ansi-blue-fg">+</span> self<span class="ansi-blue-fg">.</span>_generate_noise <span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">     20 </span><span class="ansi-red-fg">        </span><span class="ansi-green-fg">if</span> self<span class="ansi-blue-fg">.</span>different<span class="ansi-blue-fg">:</span>

</pre>
</div>
</div>

<div class="output_area">


</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>--Return--
{&#39;array&#39;: array([[20., ...  [40., 50.]]), &#39;sequence&#39;: [[1.0, 2.0], array([[11., ...  [31., 41.]]), {&#39;data&#39;:      a    b
0....0
1  3.0  4.0, &#39;vector&#39;: array([[10., ...  [30., 40.]])}]}
&gt; <span class="ansi-green-fg">/tmp/ipykernel_47082/516144916.py</span>(25)<span class="ansi-cyan-fg">__call__</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">     23 </span><span class="ansi-red-fg">        result = dict(sequence=[[1.0,2.0], x+1, dict(vector=x, data=df)],
</span><span class="ansi-green-fg">     24 </span><span class="ansi-red-fg">                      array=x+10)
</span><span class="ansi-green-fg">---&gt; 25 </span><span class="ansi-red-fg">        </span><span class="ansi-green-fg">return</span> result
<span class="ansi-green-fg">     26 </span>
<span class="ansi-green-fg">     27 </span><span class="ansi-green-fg">def</span> test_comparator <span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>

</pre>
</div>
</div>

<div class="output_area">


</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>--Call--
&gt; <span class="ansi-green-fg">/tmp/ipykernel_47082/2970004199.py</span>(22)<span class="ansi-cyan-fg">compare</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">     20 </span><span class="ansi-red-fg">            </span><span class="ansi-green-fg">return</span> <span class="ansi-blue-fg">&#39;&#39;</span>
<span class="ansi-green-fg">     21 </span>
<span class="ansi-green-fg">---&gt; 22 </span><span class="ansi-red-fg">    </span><span class="ansi-green-fg">def</span> compare <span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> left<span class="ansi-blue-fg">,</span> right<span class="ansi-blue-fg">,</span> message<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;&#39;</span><span class="ansi-blue-fg">,</span> rtol<span class="ansi-blue-fg">=</span><span class="ansi-cyan-fg">1e-07</span><span class="ansi-blue-fg">,</span> atol<span class="ansi-blue-fg">=</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">     23 </span><span class="ansi-red-fg">        </span><span class="ansi-green-fg">if</span> <span class="ansi-green-fg">not</span> type<span class="ansi-blue-fg">(</span>left<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">==</span>type<span class="ansi-blue-fg">(</span>right<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">     24 </span><span class="ansi-red-fg">            </span><span class="ansi-green-fg">return</span> <span class="ansi-blue-fg">f&#39;{message}{type(left)}!={type(right)}&#39;</span>

</pre>
</div>
</div>

<div class="output_area">


</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>&gt; <span class="ansi-green-fg">/tmp/ipykernel_47082/2970004199.py</span>(23)<span class="ansi-cyan-fg">compare</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">     21 </span>
<span class="ansi-green-fg">     22 </span><span class="ansi-red-fg">    </span><span class="ansi-green-fg">def</span> compare <span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> left<span class="ansi-blue-fg">,</span> right<span class="ansi-blue-fg">,</span> message<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;&#39;</span><span class="ansi-blue-fg">,</span> rtol<span class="ansi-blue-fg">=</span><span class="ansi-cyan-fg">1e-07</span><span class="ansi-blue-fg">,</span> atol<span class="ansi-blue-fg">=</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">---&gt; 23 </span><span class="ansi-red-fg">        </span><span class="ansi-green-fg">if</span> <span class="ansi-green-fg">not</span> type<span class="ansi-blue-fg">(</span>left<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">==</span>type<span class="ansi-blue-fg">(</span>right<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">     24 </span><span class="ansi-red-fg">            </span><span class="ansi-green-fg">return</span> <span class="ansi-blue-fg">f&#39;{message}{type(left)}!={type(right)}&#39;</span>
<span class="ansi-green-fg">     25 </span><span class="ansi-red-fg">        </span><span class="ansi-green-fg">if</span> isinstance<span class="ansi-blue-fg">(</span>left<span class="ansi-blue-fg">,</span> tuple<span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">or</span> isinstance<span class="ansi-blue-fg">(</span>left<span class="ansi-blue-fg">,</span> list<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>

</pre>
</div>
</div>

<div class="output_area">


</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>&gt; <span class="ansi-green-fg">/tmp/ipykernel_47082/2970004199.py</span>(25)<span class="ansi-cyan-fg">compare</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">     23 </span><span class="ansi-red-fg">        </span><span class="ansi-green-fg">if</span> <span class="ansi-green-fg">not</span> type<span class="ansi-blue-fg">(</span>left<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">==</span>type<span class="ansi-blue-fg">(</span>right<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">     24 </span><span class="ansi-red-fg">            </span><span class="ansi-green-fg">return</span> <span class="ansi-blue-fg">f&#39;{message}{type(left)}!={type(right)}&#39;</span>
<span class="ansi-green-fg">---&gt; 25 </span><span class="ansi-red-fg">        </span><span class="ansi-green-fg">if</span> isinstance<span class="ansi-blue-fg">(</span>left<span class="ansi-blue-fg">,</span> tuple<span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">or</span> isinstance<span class="ansi-blue-fg">(</span>left<span class="ansi-blue-fg">,</span> list<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">     26 </span><span class="ansi-red-fg">            </span><span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">     27 </span><span class="ansi-red-fg">                </span>left <span class="ansi-blue-fg">=</span> np<span class="ansi-blue-fg">.</span>array<span class="ansi-blue-fg">(</span>left<span class="ansi-blue-fg">,</span> dtype<span class="ansi-blue-fg">=</span>float<span class="ansi-blue-fg">)</span>

</pre>
</div>
</div>

<div class="output_area">


</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="test_comparator2" class="doc_header"><code>test_comparator2</code><a href="https://github.com/Jaume-JCI/block-types/tree/main/block_types/tests/core/test_utils.py#L145" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>test_comparator2</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#@pytest.mark.reference_fails</span>
<span class="k">def</span> <span class="nf">test_comparator2</span> <span class="p">():</span>
    <span class="n">comp</span> <span class="o">=</span> <span class="n">Comparator</span> <span class="p">()</span>
    <span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
    <span class="n">Y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
    <span class="n">comp</span><span class="o">.</span><span class="n">assert_equal</span> <span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">)</span>
    
    <span class="c1">#os.makedirs (&#39;test_comparator2&#39;)</span>
    <span class="c1">#joblib.dump (X, &#39;test_comparator2/res1.pk&#39;)</span>
    <span class="c1">#joblib.dump (Y, &#39;test_comparator2/res1.pk&#39;)</span>
    <span class="n">comp</span><span class="o">.</span><span class="n">assert_equal</span> <span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">data_io</span><span class="o">=</span><span class="s1">&#39;PickleIO&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;res&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tst</span><span class="o">.</span><span class="n">run</span> <span class="p">(</span><span class="n">test_comparator2</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;dummy&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>comparing results for comparator
Results are equal.

comparing results for comparator
Results are equal.

</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>running test_comparator2
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="camel_to_snake">camel_to_snake<a class="anchor-link" href="#camel_to_snake"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="camel_to_snake" class="doc_header"><code>camel_to_snake</code><a href="https://github.com/Jaume-JCI/block-types/tree/main/block_types/core/utils.py#L778" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>camel_to_snake</code>(<strong><code>name</code></strong>)</p>
</blockquote>

<pre><code>Convert CamelCase to snake_case.

Used for converting classes names to file names where
the corresponding computation is stored:
    https://stackoverflow.com/questions/1175208/elegant-python-function-to-convert-camelcase-to-snake-case</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

</div>
 

