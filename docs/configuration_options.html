---

title: Configuration


keywords: fastai
sidebar: home_sidebar

summary: "Discussion about alternatives for implementating configuration objects. Currently just unordered notes, in progress."
description: "Discussion about alternatives for implementating configuration objects. Currently just unordered notes, in progress."
nb_path: "nbs/tutorials/configuration_options.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/tutorials/configuration_options.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The current implementation makes extensive use of configuration parameters thoughout the code. Parameters being used for the each run are stored in disk both as pickle and json format for easy access. Default parameters are indicated in the <code>defaults</code> module.</p>
<p>Traditional mechanisms used for storing configuration parameters are:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="1.--Dictionary-of-parameters">1.  Dictionary of parameters<a class="anchor-link" href="#1.--Dictionary-of-parameters"> </a></h2><p>Read a dictionary of parameters from config file (e.g., .json, .ini, or other typical formats):</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>

<span class="n">config</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span> <span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;tutorials/examples/config.json&#39;</span><span class="p">,</span><span class="s1">&#39;rt&#39;</span><span class="p">))</span>
<span class="n">config</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;learning_rate&#39;: 0.0001, &#39;epochs&#39;: 50, &#39;path_results&#39;: &#39;results/experiment4&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Optionally, convert this dictionary to object</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.utils</span> <span class="kn">import</span> <span class="n">Bunch</span>

<span class="n">config</span> <span class="o">=</span> <span class="n">Bunch</span><span class="p">(</span><span class="o">**</span><span class="n">config</span><span class="p">)</span>

<span class="nb">print</span> <span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">learning_rate</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>0.0001
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Pass this object everywhere throughout the code</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="k">def</span> <span class="nf">pipeline</span> <span class="p">(</span><span class="n">config</span><span class="p">):</span>
    <span class="nb">print</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;config parameters received: </span><span class="si">{</span><span class="n">config</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">learn</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
    <span class="n">learn</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
    
<span class="k">def</span> <span class="nf">learn</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
    <span class="nb">print</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;using learning rate: </span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">learning_rate</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    
<span class="k">def</span> <span class="nf">inference</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
    <span class="nb">print</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;saving results to: </span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">path_results</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="n">pipeline</span> <span class="p">(</span><span class="n">config</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>config parameters received: {&#39;learning_rate&#39;: 0.0001, &#39;epochs&#39;: 50, &#39;path_results&#39;: &#39;results/experiment4&#39;}
using learning rate: 0.0001
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The problem with this approach is that the parameters being used by each function is hidden.</p>

</div>
</div>
</div>
</div>


