---

title: Block types


keywords: fastai
sidebar: home_sidebar

summary: "Types of blocks"
description: "Types of blocks"
nb_path: "nbs/core.block_types.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/core.block_types.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Component">Component<a class="anchor-link" href="#Component"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h3 id="Component" class="doc_header"><code>class</code> <code>Component</code><a href="https://github.com/Jaume-JCI/block_types/blob/main/block_types/core/block_types.py#L34" class="source_link" style="float:right">[source]</a></h3><blockquote><p><code>Component</code>(<strong><code>estimator</code></strong>=<em><code>None</code></em>, <strong><code>name</code></strong>:<code>Optional</code>[<code>str</code>]=<em><code>None</code></em>, <strong><code>data_converter</code></strong>:<code>Optional</code>[<a href="/core.data_conversion.html#DataConverter"><code>DataConverter</code></a>]=<em><code>None</code></em>, <strong><code>data_io</code></strong>:<code>Optional</code>[<a href="/core.utils.html#DataIO"><code>DataIO</code></a>]=<em><code>None</code></em>, <strong><code>model_plotter</code></strong>:<code>Optional</code>[<a href="/core.utils.html#ModelPlotter"><code>ModelPlotter</code></a>]=<em><code>None</code></em>, <strong><code>logger</code></strong>=<em><code>None</code></em>, <strong><code>verbose</code></strong>:<code>int</code>=<em><code>0</code></em>, <strong>**<code>kwargs</code></strong>) :: <code>ClassifierMixin</code></p>
</blockquote>

<pre><code>Base component class used in our Pipeline.</code></pre>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="__init__" class="doc_header"><code>__init__</code><a href="https://github.com/Jaume-JCI/block_types/blob/main/block_types/core/block_types.py#L36" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>__init__</code>(<strong><code>estimator</code></strong>=<em><code>None</code></em>, <strong><code>name</code></strong>:<code>Optional</code>[<code>str</code>]=<em><code>None</code></em>, <strong><code>data_converter</code></strong>:<code>Optional</code>[<a href="/core.data_conversion.html#DataConverter"><code>DataConverter</code></a>]=<em><code>None</code></em>, <strong><code>data_io</code></strong>:<code>Optional</code>[<a href="/core.utils.html#DataIO"><code>DataIO</code></a>]=<em><code>None</code></em>, <strong><code>model_plotter</code></strong>:<code>Optional</code>[<a href="/core.utils.html#ModelPlotter"><code>ModelPlotter</code></a>]=<em><code>None</code></em>, <strong><code>logger</code></strong>=<em><code>None</code></em>, <strong><code>verbose</code></strong>:<code>int</code>=<em><code>0</code></em>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

<pre><code>Initialize attributes and fields.

Parameters
----------
estimator : estimator (classifier or transformer) or None, optional
    Estimator being wrapped.
name : Pipeline or None, optional
    Name of component. If not provided, it is inferred from the name of the
    estimator's class, or the name of the custom class defining the componet.
data_converter : DataConverter or None, optional
    Converts incoming data to format expected by component, and convert
    outgoing result to format expected by caller.
data_io : DataIO or None, optional
    Manages data serialization and deserialization.
model_plotter : ModelPlotter or None, optional
    Helper object that allows to retrieve information to be shown about this
    component, as part of a Pipeline diagram.
logger : logging.logger or None, optional
    Logger used to write messages
verbose : int, optional
    Verbosity, 0: warning or critical, 1: info, 2: debug.</code></pre>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="fit" class="doc_header"><code>fit</code><a href="https://github.com/Jaume-JCI/block_types/blob/main/block_types/core/block_types.py#L118" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>fit</code>(<strong><code>X</code></strong>, <strong><code>y</code></strong>=<em><code>None</code></em>, <strong><code>load</code></strong>=<em><code>True</code></em>, <strong><code>save</code></strong>=<em><code>True</code></em>)</p>
</blockquote>

<pre><code>Estimates the parameters of the component based on given data X and labels y.

Uses the previously fitted parameters if they're found in disk and overwrite
is False.</code></pre>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="transform" class="doc_header"><code>transform</code><a href="https://github.com/Jaume-JCI/block_types/blob/main/block_types/core/block_types.py#L142" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>transform</code>(<strong><code>X</code></strong>, <strong><code>load</code></strong>=<em><code>True</code></em>, <strong><code>save</code></strong>=<em><code>True</code></em>)</p>
</blockquote>

<pre><code>Transforms the data X and returns the transformed data.

Uses the previously transformed data if it's found in disk and overwrite
is False.</code></pre>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="predict" class="doc_header"><code>predict</code><a href="https://github.com/Jaume-JCI/block_types/blob/main/block_types/core/block_types.py#L153" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>predict</code>(<strong><code>X</code></strong>, <strong><code>load</code></strong>=<em><code>True</code></em>, <strong><code>save</code></strong>=<em><code>True</code></em>)</p>
</blockquote>

<pre><code>Predicts binary labels and returns result.

Uses previously stored predictions if found in disk and overwrite is False.</code></pre>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="show_result_statistics" class="doc_header"><code>show_result_statistics</code><a href="https://github.com/Jaume-JCI/block_types/blob/main/block_types/core/block_types.py#L188" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>show_result_statistics</code>(<strong><code>result</code></strong>=<em><code>None</code></em>, <strong><code>training_data_flag</code></strong>=<em><code>False</code></em>)</p>
</blockquote>

<pre><code>Show statistics of transformed data.

Parameters
----------
result: DataFrame or other data structure or None, optional
    Transformed data whose statistics we show. If not provided, it is loaded
    from disk.
training_data_flag: bool, optional
    If True, transformed training data is loaded, otherwise transformed test
    data is loaded.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Sub-classes">Sub-classes<a class="anchor-link" href="#Sub-classes"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h3 id="SamplingComponent" class="doc_header"><code>class</code> <code>SamplingComponent</code><a href="https://github.com/Jaume-JCI/block_types/blob/main/block_types/core/block_types.py#L269" class="source_link" style="float:right">[source]</a></h3><blockquote><p><code>SamplingComponent</code>(<strong><code>estimator</code></strong>=<em><code>None</code></em>, <strong><code>transform_uses_labels</code></strong>=<em><code>True</code></em>, <strong>**<code>kwargs</code></strong>) :: <a href="/core.block_types.html#Component"><code>Component</code></a></p>
</blockquote>

<pre><code>Component that makes use of labels in transform method.

When calling the transform method, one of the columns of the received data
is assumed to contain the ground-truth labels. This allows the transform
method to modify the number of observations, changing the number of rows in
the data and in the labels. See `PandasConverter` class in
`block_types.core.data_conversion`.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h3 id="SklearnComponent" class="doc_header"><code>class</code> <code>SklearnComponent</code><a href="https://github.com/Jaume-JCI/block_types/blob/main/block_types/core/block_types.py#L290" class="source_link" style="float:right">[source]</a></h3><blockquote><p><code>SklearnComponent</code>(<strong><code>estimator</code></strong>=<em><code>None</code></em>, <strong><code>transform_uses_labels</code></strong>=<em><code>False</code></em>, <strong>**<code>kwargs</code></strong>) :: <a href="/core.block_types.html#Component"><code>Component</code></a></p>
</blockquote>

<pre><code>Component that saves estimator parameters in pickle format.

Convenience subclass used when the estimated parameters can be saved in
pickle format. Note that data transformed by this component is still
saved in parquet format by default, since DataFrame is the default format.
These defaults, however, can change. See `SklearnIO` class in
`core.utils`.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h3 id="SklearnComponent" class="doc_header"><code>class</code> <code>SklearnComponent</code><a href="https://github.com/Jaume-JCI/block_types/blob/main/block_types/core/block_types.py#L314" class="source_link" style="float:right">[source]</a></h3><blockquote><p><code>SklearnComponent</code>(<strong><code>estimator</code></strong>=<em><code>None</code></em>, <strong>**<code>kwargs</code></strong>) :: <a href="/core.block_types.html#Component"><code>Component</code></a></p>
</blockquote>

<pre><code>Component that does not save any data.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h3 id="OneClassSklearnComponent" class="doc_header"><code>class</code> <code>OneClassSklearnComponent</code><a href="https://github.com/Jaume-JCI/block_types/blob/main/block_types/core/block_types.py#L328" class="source_link" style="float:right">[source]</a></h3><blockquote><p><code>OneClassSklearnComponent</code>(<strong><code>estimator</code></strong>=<em><code>None</code></em>, <strong>**<code>kwargs</code></strong>) :: <a href="/core.block_types.html#SklearnComponent"><code>SklearnComponent</code></a></p>
</blockquote>

<pre><code>Component that uses only normal data (labelled with 0) for fitting parameters.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h3 id="PandasComponent" class="doc_header"><code>class</code> <code>PandasComponent</code><a href="https://github.com/Jaume-JCI/block_types/blob/main/block_types/core/block_types.py#L345" class="source_link" style="float:right">[source]</a></h3><blockquote><p><code>PandasComponent</code>(<strong><code>estimator</code></strong>=<em><code>None</code></em>, <strong><code>data_converter</code></strong>=<em><code>None</code></em>, <strong><code>transform_uses_labels</code></strong>=<em><code>False</code></em>, <strong><code>transformed_index</code></strong>=<em><code>None</code></em>, <strong><code>transformed_columns</code></strong>=<em><code>None</code></em>, <strong>**<code>kwargs</code></strong>) :: <a href="/core.block_types.html#Component"><code>Component</code></a></p>
</blockquote>

<pre><code>Component that preserves the DataFrame format for incoming data and results.

This class is redundant at the moment, since this is done by default by the
`Component` class. We might remove this class in future versions.
See `PandasConverter` in `core.data_conversion` for details on the data
conversion performed.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Pipeline">Pipeline<a class="anchor-link" href="#Pipeline"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote><p>Base <a href="/core.block_types.html#Pipeline"><code>Pipeline</code></a> class. For specific pipelines see <code>core.pipeline</code> module</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h3 id="Pipeline" class="doc_header"><code>class</code> <code>Pipeline</code><a href="https://github.com/Jaume-JCI/block_types/blob/main/block_types/core/block_types.py#L370" class="source_link" style="float:right">[source]</a></h3><blockquote><p><code>Pipeline</code>(<strong><code>separate_labels</code></strong>=<em><code>False</code></em>, <strong>**<code>kwargs</code></strong>) :: <a href="/core.block_types.html#SamplingComponent"><code>SamplingComponent</code></a></p>
</blockquote>

<pre><code>Pipeline composed of a list of components that run sequentially.

During training, the components of the list are trained one after the other,
where one component is fed the result of transforming the data with the list
of components located before in the pipeline.

The `Pipeline` class is a subclass of `SamplingComponent`, which itself is a
subclass of `Component`. This provides the functionality of `Component`
to any implemented pipeline, such as logging the messages, loading / saving the
results, and convert the data format so that it can work as part of other
pipelines with potentially other data formats.

The `SamplingComponent` class allows the `transform` method to receive both data and
labels. Furthermore, the Pipeline constructor sets `separate_labels=False` by default,
which means that the `fit` method receives the labels combined with the data in the same
input `X`. The rationale for this is to have some components in the pipeline that are
`SamplingComponent` themselves. Such components need the labels to be passed to the
`transform` method, and this method is called during `fit` for all the components except
the last one.</code></pre>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="__init__" class="doc_header"><code>__init__</code><a href="https://github.com/Jaume-JCI/block_types/blob/main/block_types/core/block_types.py#L392" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>__init__</code>(<strong><code>separate_labels</code></strong>=<em><code>False</code></em>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

<pre><code>Assigns attributes and calls parent constructor.

Parameters
----------
separate_labels: bool, optional
    whether or not the fit method receives the labels in a separate `y` vector
    or in the same input `X`, as an additional variable. See description of
    Pipeline class for more details.</code></pre>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="construct_diagram" class="doc_header"><code>construct_diagram</code><a href="https://github.com/Jaume-JCI/block_types/blob/main/block_types/core/block_types.py#L443" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>construct_diagram</code>(<strong><code>training_data_flag</code></strong>=<em><code>None</code></em>, <strong><code>include_url</code></strong>=<em><code>False</code></em>, <strong><code>port</code></strong>=<em><code>4000</code></em>, <strong><code>project</code></strong>=<em><code>'block_types'</code></em>)</p>
</blockquote>

<pre><code>Construct diagram of the pipeline components, data flow and dimensionality.

By default, we use test data to show the number of observations
in the output of each component. This can be changed passing
`training_data_flag=True`</code></pre>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="show_summary" class="doc_header"><code>show_summary</code><a href="https://github.com/Jaume-JCI/block_types/blob/main/block_types/core/block_types.py#L496" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>show_summary</code>(<strong><code>training_data_flag</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

<pre><code>Show list of pipeline components, data flow and dimensionality.

By default, we use test data to show the number of observations
in the output of each component. This can be changed passing
`training_data_flag=True`</code></pre>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="show_result_statistics" class="doc_header"><code>show_result_statistics</code><a href="https://github.com/Jaume-JCI/block_types/blob/main/block_types/core/block_types.py#L484" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>show_result_statistics</code>(<strong><code>training_data_flag</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

<pre><code>Show statistics about results obtained by each component.

By default, this is shown on test data, although this can change setting
`training_data_flag=True`</code></pre>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="assert_equal" class="doc_header"><code>assert_equal</code><a href="https://github.com/Jaume-JCI/block_types/blob/main/block_types/core/block_types.py#L525" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>assert_equal</code>(<strong><code>path_reference_results</code></strong>, <strong><code>assert_equal_func</code></strong>=<em><code>assert_frame_equal</code></em>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

<pre><code>Compare results stored in current run against reference results stored in given path.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="pipeline_factory" class="doc_header"><code>pipeline_factory</code><a href="https://github.com/Jaume-JCI/block_types/blob/main/block_types/core/block_types.py#L567" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>pipeline_factory</code>(<strong><code>pipeline_class</code></strong>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

<pre><code>Creates a pipeline object given its class `pipeline_class`

Parameters
----------
pipeline_class : class or str
    Name of the pipeline class used for creating the object.
    This can be either of type string or class.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

